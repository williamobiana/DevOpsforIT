# Backup and Restore Docker Data Volumes

Volumes are an ideal way to persist data generated by and used by Docker containers. They do not increase the size of containers using them and the contents of a volume exist outside the lifecycle of a given container.

## why do we need to back up

The purpose of backup your data volumes to have a copy to be recovered in the event of a container failure, as a result of hardware or software malfunction. 

## how to backup a data volume

create a new container `nginx1` with a volume called `/data`:
```
docker run -d -v /data --name nginx1 nginx
```

pass a command that compresses and archives `tar` the contents of the `/data` volume to our `backup.tar` file inside a `/backup` directory using an ubuntu image:
```
docker run --rm --volumes-from nginx1 -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /data
```

verify on your local device if present, chmod to read and write and open the backup.tar to see the contents:
```
chmod 777 backup.tar
```
```
tar -xvzf backup.tar
```

## how to restore a backup volume

create a new container `nginx2` with volume called `/data`:
```
docker run -d -v /data --name nginx2 nginx
```

decompress and un-archive the backup file in the new container's data volume:
```
docker run --rm --volumes-from nginx2 -v $(pwd):/backup ubuntu -c "cd /data && tar xvf /backup/backup.tar --strip 1"
```

verify in the container if present:
```
docker exec -it (container_ID) bash
```
```
cd /data
```


